---
layout: default
amp: true
title: API Test
---

<div id="status-box" style="padding: 20px; border: 2px solid #ccc; margin: 20px 0;">
  Warte auf Eingabe...
</div>

<button id="test-btn" type="button" style="padding: 10px 20px; font-weight: bold; cursor: pointer;">
  Backend rufen
</button>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const button = document.getElementById("test-btn");

    if (button) {
      button.addEventListener("click", async function() {
        
        const statusBox = document.getElementById("status-box");
        statusBox.innerText = "Lade...";
        statusBox.style.borderColor = "orange";
        statusBox.style.backgroundColor = "#fff3cd";

        try {
          const workerUrl = "https://backend.kite-mallorca-booking-api-v1.workers.dev"; 
          
          const response = await fetch(workerUrl, {
            method: "GET",
            headers: { "Content-Type": "application/json" }
          });

          if (!response.ok) {
            throw new Error("HTTP Fehler Status: " + response.status);
          }

          const data = await response.json();
          
          statusBox.innerText = "ERFOLG: " + (data.message || JSON.stringify(data));
          statusBox.style.borderColor = "green";
          statusBox.style.backgroundColor = "#d4edda";
          
        } catch (error) {
          console.error(error);
          statusBox.innerText = "FEHLER: " + error.message;
          statusBox.style.borderColor = "red";
          statusBox.style.backgroundColor = "#f8d7da";
        }
      });
    }
  });
</script>